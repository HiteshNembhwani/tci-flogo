"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../../constants"),utils_1=require("../../util/utils"),lodash=require("lodash"),FlowDiagramTask=function(){function t(t){this.update(t),this.title=this.title.replace(/\s/g,"")}return t.genTaskID=function(){return utils_1.Guid.newGuid()},t.prototype.getField=function(t){if(t=t.toLowerCase(),"flogo:activity"===this.type){for(s=0;s<this.inputs.length;s++)if(this.inputs[s].name.toLowerCase()===t)return this.inputs[s]}else if("flogo:trigger"===this.type){for(s=0;s<this.settings.length;s++)if(this.settings[s].name.toLowerCase()===t)return this.settings[s];for(s=0;s<this.handler.settings.length;s++)if(this.handler.settings[s].name.toLowerCase()===t)return this.handler.settings[s]}for(var s=0;s<this.outputs.length;s++)if(this.outputs[s].name.toLowerCase()===t)return this.outputs[s];return null},t.prototype.update=function(s){s||(s={}),this.id=s.id||this.id||t.genTaskID(),this.type=s.type||this.type||"",this.taskType="flogo:activity"===this.type?constants_1.TASK_TYPE.TASK:constants_1.TASK_TYPE.TASK_ROOT,this.version=s.version||this.version||"",this.name=s.name||this.name||"new task",this.title=s.title||this.title||"",this.description=s.description||lodash.get(s,"display.description",void 0)||this.description||"",this.ref=s.ref||this.ref||"",this.settings=s.settings||this.settings||[],this.outputs=s.outputs||this.outputs||[],this.inputs=s.inputs||this.inputs||[],this.handler=s.handler||this.handler||{settings:[]},this.display=s.display||this.display||{visible:!0},this.inputMappings=lodash.isEmpty(s.inputMappings)?this.inputMappings||{}:lodash.cloneDeep(s.inputMappings),lodash.isEmpty(s.tasks)||(this.tasks=lodash.cloneDeep(s.tasks)),this.s3Prefix=s.s3Prefix||this.s3Prefix||""},t}();exports.FlowDiagramTask=FlowDiagramTask;