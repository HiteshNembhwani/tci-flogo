"use strict";var __decorate=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core");require("brace"),require("brace/theme/eclipse"),require("brace/theme/monokai"),require("brace/mode/javascript"),require("brace/mode/json");var AceEditorComponent=function(){function t(t){this.textChanged=new core_1.EventEmitter,this.textChange=new core_1.EventEmitter,this.style={},this._options={},this._readOnly=!1,this._theme="eclipse",this._mode="json",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="";var e=t.nativeElement;this._editor=ace.edit(e),this.init(),this.initEvents()}return t.prototype.init=function(){this.setOptions(this._options||{}),this.setTheme(this._theme),this.setMode(this._mode),this.setReadOnly(this._readOnly)},t.prototype.initEvents=function(){var t=this;this._editor.on("change",function(){return t.updateText()}),this._editor.on("paste",function(){return t.updateText()})},t.prototype.updateText=function(){var t=this._editor.getValue();t!==this.oldText&&(void 0!==this.oldText&&(this._durationBeforeCallback?(this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){this._text=t,this.textChange.emit(t),this.textChanged.emit(t),this.timeoutSaving=null},this._durationBeforeCallback)):(this._text=t,this.textChange.emit(t),this.textChanged.emit(t))),this.oldText=t)},Object.defineProperty(t.prototype,"options",{set:function(t){this.setOptions(t)},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this._options=t,this._editor.setOptions(t||{})},Object.defineProperty(t.prototype,"readOnly",{set:function(t){this.setReadOnly(t)},enumerable:!0,configurable:!0}),t.prototype.setReadOnly=function(t){this._readOnly=t,this._editor.setReadOnly(t)},Object.defineProperty(t.prototype,"theme",{set:function(t){this.setTheme(t)},enumerable:!0,configurable:!0}),t.prototype.setTheme=function(t){this._theme=t,this._editor.setTheme("ace/theme/"+t)},Object.defineProperty(t.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),t.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this._editor.getSession().setMode(this._mode):this._editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.setText=function(t){this._text!==t&&(null!==t&&void 0!==t||(t=""),!0===this._autoUpdateContent&&(this._text=t,this._editor.setValue(t)))},Object.defineProperty(t.prototype,"autoUpdateContent",{set:function(t){this.setAutoUpdateContent(t)},enumerable:!0,configurable:!0}),t.prototype.setAutoUpdateContent=function(t){this._autoUpdateContent=t},Object.defineProperty(t.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},t.prototype.getEditor=function(){return this._editor},t}();__decorate([core_1.Output(),__metadata("design:type",Object)],AceEditorComponent.prototype,"textChanged",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],AceEditorComponent.prototype,"textChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],AceEditorComponent.prototype,"style",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],AceEditorComponent.prototype,"options",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],AceEditorComponent.prototype,"readOnly",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],AceEditorComponent.prototype,"theme",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],AceEditorComponent.prototype,"mode",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[String])],AceEditorComponent.prototype,"text",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],AceEditorComponent.prototype,"autoUpdateContent",null),__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],AceEditorComponent.prototype,"durationBeforeCallback",null),AceEditorComponent=__decorate([core_1.Component({selector:"ace-editor",template:"",moduleId:module.id,styleUrls:["ace-editor.component.css"]}),__metadata("design:paramtypes",[core_1.ElementRef])],AceEditorComponent),exports.AceEditorComponent=AceEditorComponent;