"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,a=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(n<3?s(a):n>3?s(t,r,a):s(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),index_1=require("../shared/errors/index"),router_1=require("@angular/router"),canvas_service_1=require("./../canvas/canvas.service"),constants_1=require("./../../common/constants"),ErrorsComponent=function(){function e(e,t,r,o){var s=this;this.errorService=e,this._router=t,this._activeRoute=r,this._canvasService=o,this.expanded=!1,this.expandedState="collapsed",this.errors=[],r.params.subscribe(function(e){s.sandboxId=e.sandboxId})}return e.prototype.ngOnInit=function(){var e=this;this.errorSub=this.errorService.errors$.subscribe(function(t){e.errors=t})},e.prototype.ngOnDestroy=function(){this.errorSub.unsubscribe()},e.prototype.toggleErrorPanel=function(){this.expanded=!this.expanded},e.prototype.errorSelected=function(e){var t,r;if(this.sandboxId){var o="/wistudio/"+this.sandboxId;if(e.context.has("APPID"))if(o+="/"+e.context.get("APPID"),e.context.has("FLOWID"))if(r=e.context.get("FLOWID"),o+="/"+r,e.context.has("ITEMID")){o+="/task/"+(t=e.context.get("ITEMID")),e.context.has("FIELD")&&(o+="/"+e.context.get("FIELD"));var s=this._canvasService.getAppModel().getFlowById(r).items[t].taskType;if(s===constants_1.TASK_TYPE.TASK){var n=this._canvasService.getSelectedTask();n&&t&&n.id!==t&&this._canvasService._msg.emit(constants_1.APP_MESSAGING_VALUES.UNSELECTED_TASK,{}),this._router.navigate([o])}else s===constants_1.TASK_TYPE.TASK_BRANCH&&this._canvasService._msg.emit(constants_1.APP_MESSAGING_VALUES.BRANCH_SELECTED,{flowId:r,taskId:t})}else e.context.has("NODEID")&&this._canvasService._msg.emit(constants_1.APP_MESSAGING_VALUES.NODE_ADD,{flowId:r,nodeId:e.context.get("NODEID")});else{var a={queryParams:{sandboxId:this.sandboxId,appId:e.context.get("APPID")}};this._router.navigate(["/applicationsdetail"],a)}}},e}();ErrorsComponent=__decorate([core_1.Component({moduleId:module.id,selector:"errors-panel",templateUrl:"errors.component.html",styleUrls:["errors.css"]}),__metadata("design:paramtypes",[index_1.ErrorsService,router_1.Router,router_1.ActivatedRoute,canvas_service_1.CanvasService])],ErrorsComponent),exports.ErrorsComponent=ErrorsComponent;