"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,a=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(c<3?n(a):c>3?n(t,r,a):n(t,r))||a);return c>3&&a&&Object.defineProperty(t,r,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),ngx_perfect_scrollbar_1=require("ngx-perfect-scrollbar"),dragging_service_1=require("./dragging.service"),icons_service_1=require("../service/icons.service"),TreeComponent=function(){function e(e,t){this.draggingService=e,this.iconsService=t,this.searchTerm="",this.hover=new core_1.EventEmitter,this.leave=new core_1.EventEmitter,this.select=new core_1.EventEmitter,this.search=new core_1.EventEmitter}return e.prototype.ngOnChanges=function(e){e.selected&&this.selected&&(this.selectedBranch=this.extractNodePath(this.selected)),e.searchTerm&&(this.searchTerm=this.searchTerm||""),e.treeNodes&&this.updateScrollbars()},e.prototype.ngAfterViewInit=function(){this.updateScrollbars()},e.prototype.onSelect=function(e){var t=e.node;t&&t.isSelectable&&this.select.emit(t)},e.prototype.onCategoryExpand=function(e){this.updateScrollbars()},e.prototype.onMouseHover=function(e){this.hover.emit(e)},e.prototype.onMouseLeave=function(e){this.leave.emit(e)},e.prototype.isNodeInSelectedBranch=function(e){return!!this.selectedBranch&&this.selectedBranch.indexOf(e)>=0},e.prototype.onDragStart=function(e,t){e.dataTransfer.setData("data",t.path),this.draggingService.dragStart(this.dragType,t)},e.prototype.getIcon=function(e){return this.iconsService.getIcon(e)},e.prototype.clearSearch=function(){this.search.emit("")},e.prototype.onSearchChange=function(e){this.search.emit(e)},e.prototype.extractNodePath=function(e){for(var t=[e],r=e;r.parent;)r=r.parent,t.push(r);return t},e.prototype.updateScrollbars=function(){var e=this;setTimeout(function(){e.scrollbars&&e.scrollbars.forEach(function(e){return e.update()})},0)},e}();__decorate([core_1.Input(),__metadata("design:type",Array)],TreeComponent.prototype,"treeNodes",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],TreeComponent.prototype,"searchTerm",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],TreeComponent.prototype,"selected",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],TreeComponent.prototype,"dragType",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],TreeComponent.prototype,"hover",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],TreeComponent.prototype,"leave",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],TreeComponent.prototype,"select",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],TreeComponent.prototype,"search",void 0),__decorate([core_1.ViewChildren(ngx_perfect_scrollbar_1.PerfectScrollbarDirective),__metadata("design:type",core_1.QueryList)],TreeComponent.prototype,"scrollbars",void 0),TreeComponent=__decorate([core_1.Component({selector:"tibco-mapper-tree",moduleId:module.id,templateUrl:"tree.component.html",styleUrls:["tree.component.css"]}),__metadata("design:paramtypes",[dragging_service_1.DraggingService,icons_service_1.IconsService])],TreeComponent),exports.TreeComponent=TreeComponent;