"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core");require("rxjs/add/operator/distinctUntilChanged"),require("rxjs/add/operator/do"),require("rxjs/add/operator/map"),require("rxjs/add/operator/takeUntil");var single_emission_subject_1=require("../shared/single-emission-subject"),dragging_service_1=require("../tree/dragging.service"),editor_service_1=require("../editor/editor.service"),mapper_service_1=require("../mapper.service"),FunctionsComponent=function(){function e(e,t){this.mapperService=e,this.editorService=t,this.functions=[],this.filterTerm="",this.dragType=dragging_service_1.TYPE_PARAM_FUNCTION,this.ngDestroy=single_emission_subject_1.SingleEmissionSubject.create()}return e.prototype.ngOnInit=function(){var e=this;this.name="",this.help=null,this.mapperService.state.map(function(e){return e.functions}).distinctUntilChanged().takeUntil(this.ngDestroy).subscribe(function(t){e.functions=t.nodes,e.filterTerm=t.filterTerm||""})},e.prototype.ngOnDestroy=function(){this.ngDestroy.emitAndComplete()},e.prototype.onSelect=function(e){var t=e.data;t&&t.snippet&&this.editorService.insertText(t.snippet)},e.prototype.onHover=function(e){e.data&&e.data.help&&(this.name=e.label,this.help=e.data.help)},e.prototype.onSearch=function(e){this.mapperService.filterFunctions(e)},e}();FunctionsComponent=__decorate([core_1.Component({selector:"tibco-mapper-functions",moduleId:module.id,templateUrl:"functions.component.html",styleUrls:["functions.component.css"]}),__metadata("design:paramtypes",[mapper_service_1.MapperService,editor_service_1.EditorService])],FunctionsComponent),exports.FunctionsComponent=FunctionsComponent;