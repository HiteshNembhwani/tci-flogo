"use strict";var __decorate=this&&this.__decorate||function(e,t,i,s){var o,a=arguments.length,r=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),upload_service_1=require("./upload.service"),router_1=require("@angular/router"),UploadComponent=function(){function e(e,t){var i=this;this.uploadService=e,this.route=t,this.display=!0,this.fileList=[],this.placeholder=!0,this.invalidFiles=[],this.validation={hasGo:!1,hasTs:!1,hasModule:!1,hasJson:!1,isZip:!1,valid:!0},this.isValid=!1,this.progress=0,this.status="selecting",this.result={},this.messages=[],this.uploadService.progress$.subscribe(function(e){i.progress=e,100===i.progress&&(i.status="validating")})}return e.prototype.uploadFiles=function(){var e=this;this.result={},this.status="uploading",this.uploadService.uploadContribution(this.fileList).subscribe(function(t){e.status="compiling";for(var i=t.data.split("##"),s=0;s<i.length-1;s++){var o=JSON.parse(i[s]);e.messages.push(o),"DONE"===o.status?e.route.navigate(["/applications"]):o.status}},function(e){})},e.prototype.compileAndUploadFiles=function(){var e=this;this.uploadService.compile(this.result.category).subscribe(function(t){e.route.navigate(["/applications"])})},e.prototype.onFilesChange=function(e){this.placeholder=!1,this.fileList=e,this.fileList.length>0&&(this.isValid=!0)},e}();UploadComponent=__decorate([core_1.Component({moduleId:module.id,selector:"contrib-upload",templateUrl:"upload.html",styleUrls:["upload.css"]}),__metadata("design:paramtypes",[upload_service_1.UploadService,router_1.Router])],UploadComponent),exports.UploadComponent=UploadComponent;