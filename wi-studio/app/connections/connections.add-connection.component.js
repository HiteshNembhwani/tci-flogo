"use strict";var __decorate=this&&this.__decorate||function(e,o,n,t){var i,c=arguments.length,s=c<3?o:null===t?t=Object.getOwnPropertyDescriptor(o,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,n,t);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(c<3?i(s):c>3?i(o,n,s):i(o,n))||s);return c>3&&s&&Object.defineProperty(o,n,s),s},__metadata=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),connectionsService_1=require("../shared/services/connectionsService"),salesforceoAuth_1=require("../shared/services/salesforceoAuth"),windowRefService_1=require("../shared/services/windowRefService"),ng2_bootstrap_1=require("ng2-bootstrap"),router_1=require("@angular/router"),connectiontype_1=require("./connectiontype"),connections_connectionsdetails_service_1=require("./connections.connectionsdetails.service"),connections_list_component_1=require("./connections-list.component"),AddNewConnectionComponent=function(){function e(e,o,n,t,i,c){var s=this;this.connectionService=e,this.salesforceoAuthService=o,this._window=n,this._connectionFieldDetailService=t,this._router=i,this._ConnectionListComponent=c,this.isSalesForceConnection=!0,this.newConnectionsObj=[],this.loadingRedirectURL=!1,this.baseLocationhRef="";var r=this._window.nativeWindow.location.href,a=this._window.nativeWindow.location.pathname;this.baseLocationhRef=r.replace(a,""),""!==this._window.nativeWindow.location.search&&(this.baseLocationhRef=this.baseLocationhRef.split("?")[0]),this.connectionService.getConnectors().subscribe(function(e){s.newConnectionsObj=e})}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){void 0!==this.newConnectionsListModal&&(this.newConnectionsListModal.config={ignoreBackdropClick:!0,keyboard:!1}),this.activeConnectionsExist&&this.newConnectionsListModal.show()},e.prototype.addNewConnection=function(e,o){this.connectionCategory=o;this.connectionCategory;return this._router.navigate(["../wistudio/connectiondetails"],{queryParams:{type:this.connectionCategory}}),!1},e.prototype.closeAddNewConnection=function(){this.addNewConnectionModal.hide();this._router.navigate(["../wistudio/connections"])},e.prototype.closeNewConnectionsListModal=function(){this.newConnectionsListModal.hide(),this._ConnectionListComponent.redirectedToAddNewConnection=!1},e.prototype.getClassNameByConnectionType=function(e){return e===connectiontype_1.ConnectionType.SALESFORCE&&(this.className="addConnection-bg-salesforce",this.connectionDisplayString="SF",this.colorByConnectionType="connectionType-SalesForce",this.connectorTitle="Salesforce"),e===connectiontype_1.ConnectionType.MARKETO&&(this.className="addConnection-bg-marketo",this.connectionDisplayString="M",this.colorByConnectionType="connectionType-Marketo",this.connectorTitle="Marketo"),this.className},e.prototype.getConnectorIconSrc=function(e){var o="";return"salesforce"===e.toLowerCase()&&(o="/wistudio/v1/contributions/connectors/tibco-salesforce/icons/ic-tibco-salesforce.svg"),"marketo"===e.toLowerCase()&&(o="/wistudio/v1/contributions/connectors/tibco-marketo/icons/ic-tibco-marketo.svg"),this.baseLocationhRef+o},e}();__decorate([core_1.ViewChild("addNewConnectionModal"),__metadata("design:type",ng2_bootstrap_1.ModalDirective)],AddNewConnectionComponent.prototype,"addNewConnectionModal",void 0),__decorate([core_1.ViewChild("newConnectionsListModal"),__metadata("design:type",ng2_bootstrap_1.ModalDirective)],AddNewConnectionComponent.prototype,"newConnectionsListModal",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],AddNewConnectionComponent.prototype,"activeConnectionsExist",void 0),AddNewConnectionComponent=__decorate([core_1.Component({moduleId:module.id,selector:"add-connection",templateUrl:"connections.add-connection.html",styleUrls:["connections.add-connection.css"]}),__metadata("design:paramtypes",[connectionsService_1.ConnectionsService,salesforceoAuth_1.SalesforceoAuthService,windowRefService_1.WindowRef,connections_connectionsdetails_service_1.ConnectionsFieldDetailService,router_1.Router,connections_list_component_1.ConnectionsListComponent])],AddNewConnectionComponent),exports.AddNewConnectionComponent=AddNewConnectionComponent;