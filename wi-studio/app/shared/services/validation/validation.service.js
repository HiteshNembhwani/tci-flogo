"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var a,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(o<3?a(n):o>3?a(t,r,n):a(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var map_output_schema_provider_1=require("../../../mapper/service/map.output.schema.provider"),map_input_schema_provider_1=require("../../../mapper/service/map.input.schema.provider"),TCIServices_1=require("../TCIServices"),core_1=require("@angular/core"),rxjs_extensions_1=require("../../../../common/rxjs-extensions"),utils_1=require("../../../../common/util/utils"),AppValidationRule_1=require("./AppValidationRule"),ValidationService=ValidationService_1=function(){function e(e,t,r){this.tciService=e,this.inputProvider=t,this.outputProvider=r,ValidationService_1.id=utils_1.Guid.newGuid()}return e.prototype.getAllErrors=function(){return this.errors},e.prototype.start=function(e,t){var r=this;return rxjs_extensions_1.Observable.create(function(i){var a=AppValidationRule_1.AppValidationRule.newValidationRule(r.inputProvider,r.outputProvider,r.tciService).start(e,t);rxjs_extensions_1.Observable.merge.apply(rxjs_extensions_1.Observable,a).toArray().subscribe(function(e){i.next(e),r.errors=e,r.tciService.AppMessaging.emit("VALIDATION_ERRORS",e)})})},e}();ValidationService=ValidationService_1=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[TCIServices_1.TCIServices,map_input_schema_provider_1.ContextInputSchemaProvider,map_output_schema_provider_1.ScopedOutputSchemaProvider])],ValidationService),exports.ValidationService=ValidationService;var ValidationService_1;