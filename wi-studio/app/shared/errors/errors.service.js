"use strict";var __decorate=this&&this.__decorate||function(r,e,t,o){var s,i=arguments.length,n=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,e,t,o);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(n=(i<3?s(n):i>3?s(e,t,n):s(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n},__metadata=this&&this.__metadata||function(r,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,e)};Object.defineProperty(exports,"__esModule",{value:!0});var validation_1=require("../../../common/models/validation"),TCIServices_1=require("./../services/TCIServices"),core_1=require("@angular/core"),ReplaySubject_1=require("rxjs/ReplaySubject"),Observable_1=require("rxjs/Observable"),ErrorsService=function(){function r(r){var e=this;this.tciService=r,this.errors=new Array,r.AppMessaging.on("VALIDATION_ERRORS",function(r){e.errors=[],Observable_1.Observable.from(r).map(function(r){return r.getErrors()}).map(function(r){return e.errors=e.errors.concat(r)}).subscribe(function(r){e.errorsSubject.next(e.errors)})}),this.errorsSubject=new ReplaySubject_1.ReplaySubject(1),this.errors$=this.errorsSubject.asObservable()}return r.prototype.startRandomGeneration=function(){var r=this;this.randomSub=Observable_1.Observable.interval(5e3).subscribe(function(){var e=r.createRandomError();r.addError(e)})},r.prototype.stopRandomGeneration=function(){void 0!==this.randomSub&&this.randomSub.unsubscribe()},r.prototype.addError=function(r){this.errors=this.errors.concat([r]),this.errorsSubject.next(this.errors)},r.prototype.clearErrors=function(){this.errors=new Array,this.errorsSubject.next(this.errors)},r.prototype.createRandomError=function(){return validation_1.ValidationError.newError("200","Some Message")},r.prototype.getErrorMsgByField=function(r,e,t,o){var s="";if(this.errors&&o)for(var i=0,n=this.errors;i<n.length;i++){var a=n[i];if(a.context){var c=a.context.get("FIELD"),u=a.context.get("APPID"),b=a.context.get("FLOWID"),f=a.context.get("ITEMID");if(u===r&&b===e&&f===t&&c===o&&a.errorMsg){s=a.errorMsg.replace(/^(\s*Error:\s*)/gi,"");break}}}return s},r}();ErrorsService=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[TCIServices_1.TCIServices])],ErrorsService),exports.ErrorsService=ErrorsService;