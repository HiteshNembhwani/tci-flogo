"use strict";function mapTypeToConstant(t){switch(t){case"string":case constants_1.TASK_ATTRIBUTE_TYPE.STRING:return constants_1.TASK_ATTRIBUTE_TYPE.STRING;case"password":case constants_1.TASK_ATTRIBUTE_TYPE.PASSWORD:return constants_1.TASK_ATTRIBUTE_TYPE.PASSWORD;case"number":case"integer":case constants_1.TASK_ATTRIBUTE_TYPE.NUMBER:case constants_1.TASK_ATTRIBUTE_TYPE.INTEGER:return constants_1.TASK_ATTRIBUTE_TYPE.NUMBER;case"boolean":case constants_1.TASK_ATTRIBUTE_TYPE.BOOLEAN:return constants_1.TASK_ATTRIBUTE_TYPE.BOOLEAN;case"object":case constants_1.TASK_ATTRIBUTE_TYPE.OBJECT:return constants_1.TASK_ATTRIBUTE_TYPE.OBJECT;case"map":case"params":case constants_1.TASK_ATTRIBUTE_TYPE.PARAMS:return constants_1.TASK_ATTRIBUTE_TYPE.PARAMS;case"any":case constants_1.TASK_ATTRIBUTE_TYPE.ANY:return constants_1.TASK_ATTRIBUTE_TYPE.ANY;case"complex_object":case"texteditor":return constants_1.TASK_ATTRIBUTE_TYPE.COMPLEX_OBJECT;case"schema":case"table":return constants_1.TASK_ATTRIBUTE_TYPE.SCHEMA;case"file":case"fileselector":return constants_1.TASK_ATTRIBUTE_TYPE.FILE;default:return constants_1.TASK_ATTRIBUTE_TYPE.STRING}}function getControlByType(t,e){var s="";try{var a=mapTypeToConstant(t.display.type||t.type);switch(t.type&&t.display&&mapTypeToConstant(t.type)===constants_1.TASK_ATTRIBUTE_TYPE.COMPLEX_OBJECT&&(a=t.display.schema?constants_1.TASK_ATTRIBUTE_TYPE.SCHEMA:constants_1.TASK_ATTRIBUTE_TYPE.COMPLEX_OBJECT),a){case constants_1.TASK_ATTRIBUTE_TYPE.STRING:s="FieldTextBox";break;case constants_1.TASK_ATTRIBUTE_TYPE.PASSWORD:s="FieldPassword";break;case constants_1.TASK_ATTRIBUTE_TYPE.NUMBER:case constants_1.TASK_ATTRIBUTE_TYPE.INTEGER:s="FieldNumber";break;case constants_1.TASK_ATTRIBUTE_TYPE.BOOLEAN:s="FieldRadio";break;case constants_1.TASK_ATTRIBUTE_TYPE.ANY:case constants_1.TASK_ATTRIBUTE_TYPE.COMPLEX_OBJECT:case constants_1.TASK_ATTRIBUTE_TYPE.PARAMS:s="FieldSchema";break;case constants_1.TASK_ATTRIBUTE_TYPE.SCHEMA:s="FieldGrid";break;case constants_1.TASK_ATTRIBUTE_TYPE.FILE:s="FieldFile";break;default:s="FieldTextBox"}return t.allowed&&(s="FieldListBox"),s}catch(t){return"FieldTextBox"}}Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../../../common/constants"),lodash=require("lodash"),FieldModel=function(){function t(t){this.name=t.name||"",this.displayName=t.display?t.display.name||this.name:this.name,this.description=t.description||lodash.get(t,"display.description",void 0)||"",this.type=t.type||"string",this.taskField=t,this.errorMsgs=[],this.setControlType()}return t.prototype.setControlType=function(){this.controlType=getControlByType(this.taskField)},Object.defineProperty(t.prototype,"value",{get:function(){return this.valueAttribute().value},set:function(t){this.valueAttribute().inRoot?this.taskField.value=t:this.taskField.value.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getBoolean("display.visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return lodash.get(this.taskField,"display.readonly",!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return!this.hasErrors&&this.getBoolean("display.valid")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasErrors",{get:function(){return this.errorMsgs&&this.errorMsgs.length>0},enumerable:!0,configurable:!0}),t.prototype.getBoolean=function(t){return lodash.get(this.taskField,t,!0)},t.prototype.hasValue=function(){return!lodash.isUndefined(this.value)&&this.value.toString().trim().length>0},t.prototype.controlValidation=function(){},t.prototype.validate=function(){this.errorMsgs=[],this.controlValidation()},t.prototype.valueAttribute=function(){return"complex_object"===this.type?(this.taskField.value&&this.taskField.value.value||(this.taskField.value={metadata:"",value:""}),{inRoot:!1,value:this.taskField.value.value}):(lodash.isUndefined(this.taskField.value)&&(this.taskField.value="","boolean"===this.type&&(this.taskField.value=!1)),{inRoot:!0,value:this.taskField.value})},t}();exports.FieldModel=FieldModel;